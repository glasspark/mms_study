<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<meta name="description" content="" />
<meta name="author" content="" />
<title>MMS - 모두모여스터디</title>
<!-- Favicon-->
<link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
<!-- Custom Google font-->
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link
	href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@100;200;300;400;500;600;700;800;900&amp;display=swap"
	rel="stylesheet" />
<!-- Bootstrap icons-->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css"
	rel="stylesheet" />
<!-- 제이쿼리 -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!-- Bootstrap core JS-->
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- Core theme CSS (includes Bootstrap)-->
<link href="/css/styles.css" rel="stylesheet" />
<link href="/css/studyDetail.css" rel="stylesheet" />
<script src="/js/studyDetail.js"></script>
</head>
<body class="d-flex flex-column h-100 bg-light">
	<main class="flex-shrink-0">
		<!-- 네비게이션바 -->
		<nav th:replace="~{navbar :: navbarFragment}"></nav>

		<!-- Projects Section-->
		<section class="py-5">
			<div class="container px-5 mb-5">

				<div class="row gx-1 justify-content-center">
					<!-- <div class="col-lg-11 col-xl-9 col-xxl-8"> -->
					<div class="d-flex justify-content-center">
						<!-- 	<div class=" rounded-4 study-detail-left-box me-3 btn ">??</div> -->
						<div class="col-lg-12 col-xl-9 col-xxl-8">

							<!-- Project Card 1-->
							<!-- 			<div
								class="card overflow-hidden rounded-4 border-0 mb-3 position-relative">
								<div class="card-body p-0">
									<div class="d-flex align-items-center w-100 position-relative">

										수정하기, 삭제하기, 모집완료 버튼 - 오른쪽 상단 끝으로 정렬
										<div th:if="${data.leaderUsername == #authentication.name}"
											class="position-absolute top-0 end-0 m-3">
											<ul class="nav nav-pills">
												<li class="nav-item dropdown "><a
													class="nav-link dropdown-toggle" data-bs-toggle="dropdown"
													href="#" role="button" aria-haspopup="true"
													aria-expanded="false"><i class="bi bi-pencil-square"></i>
												</a>
													<div class="dropdown-menu"
														style="position: absolute; inset: 0px auto auto 0px; margin: 0px; transform: translate(0px, 42px);"
														data-popper-placement="bottom-start"
														th:attr="data-study=${data.id}" id="dropDownLists"
														th:attrappend="data-recruitment-status=${data.recruitmentStatus}">
														<a class="dropdown-item" href="#" id="closed"> <span
															th:text="${data.recruitmentStatus == 'RECRUITMENT_CLOSED' ? '모집중' : (data.recruitmentStatus == 'RECRUITING' ? '모집완료' : '')}">
																기본 값이나 다른 상태일 때 표시될 내용
														</span>
														</a> <a class="dropdown-item"
															th:href="@{/create/group(num=${data.id})}">수정</a> <a
															class="dropdown-item" href="#" id="delBtn">삭제</a>
													</div></li>
											</ul>
										</div>
										
										<div class="p-3 w-100">
											<div class="box-line mb-3">
												<div class="d-flex justify-content-start align-items-center">
													<span th:switch="${data.recruitmentStatus}"
														class="group-statu-type p-1"
														th:classappend="${data.recruitmentStatus == 'RECRUITING'} ? 'recruiting' : 
                      (${data.recruitmentStatus == 'RECRUITMENT_CLOSED'} ? 'recruitment-closed' : '')">
														<span th:case="'RECRUITING'">모집중</span> <span
														th:case="'RECRUITMENT_CLOSED'">모집완료</span> 기본 값 설정
														<span
										th:case="*">상태 없음</span>
													</span>

													<h2 class="fw-bolder mb-0 ps-2" th:text="${data.name}"></h2>
												</div>
												<div class="d-flex justify-content-between mt-2">
													<div class="d-flex">
														<p class="border-text1 me-2" th:text="${data.leader}"></p>
														<p class="border-text1 me-2"
															th:text="${#temporals.format(data.approvalDecisionAt, 'yyyy-MM-dd HH:mm')}">작성
															시간</p>
													</div>
													<div>
														<i class="bi bi-person me-3"
															th:text="${data.memberCount} + ' / ' + ${data.maxMembers}"></i>
													</div>
												</div>

											</div>
											<p th:text="${data.description}"></p>
										</div>
									</div>
								</div>
							</div>
		 -->
							<div
								class="card overflow-hidden rounded-4 border-0 mb-3 position-relative">
								<div class="p-3 w-100 position-relative">
									<div class="box-line mb-3">
										<div class="d-flex justify-content-between align-items-center">
											<!-- 왼쪽: 상태, 제목 -->
											<div class="d-flex align-items-center">
												<span th:switch="${data.recruitmentStatus}"
													class="group-statu-type p-1"
													th:classappend="${data.recruitmentStatus == 'RECRUITING'} ? 'recruiting' : 
                      (${data.recruitmentStatus == 'RECRUITMENT_CLOSED'} ? 'recruitment-closed' : '')">
													<span th:case="'RECRUITING'">모집중</span> <span
													th:case="'RECRUITMENT_CLOSED'">모집완료</span>
												</span>
												<h2 class="fw-bolder mb-0 ps-2" th:text="${data.name}"></h2>
											</div>
											<!-- 오른쪽: 가입신청 버튼, 수정/삭제 드롭다운 아이콘 -->
											<div
												class="d-flex align-items-center position-absolute top-0 end-0 m-3">
												<!-- 가입신청 버튼 -->
												<button class="btn btn-primary me-2" id="joinRequestBtn"
													th:attr="data-study=${data.id}">가입신청</button>

												<!-- 수정하기, 삭제하기, 모집완료 버튼 - 오른쪽 상단 끝으로 정렬 -->
												<div th:if="${data.leaderUsername == #authentication.name}">
													<ul class="nav nav-pills">
														<li class="nav-item dropdown"><a
															class="nav-link dropdown-toggle"
															data-bs-toggle="dropdown" href="#" role="button"
															aria-haspopup="true" aria-expanded="false"> <i
																class="bi bi-pencil-square"></i>
														</a>
															<div class="dropdown-menu"
																style="position: absolute; inset: 0px auto auto 0px; margin: 0px; transform: translate(0px, 42px);"
																data-popper-placement="bottom-start"
																th:attr="data-study=${data.id}" id="dropDownLists"
																th:attrappend="data-recruitment-status=${data.recruitmentStatus}">
																<a class="dropdown-item" href="#" id="closed"> <span
																	th:text="${data.recruitmentStatus == 'RECRUITMENT_CLOSED' ? '모집중' : (data.recruitmentStatus == 'RECRUITING' ? '모집완료' : '')}">
																		<!-- 기본 값이나 다른 상태일 때 표시될 내용 -->
																</span>
																</a> <a class="dropdown-item"
																	th:href="@{/create/group(num=${data.id})}">수정</a> <a
																	class="dropdown-item" href="#" id="delBtn">삭제</a>
															</div></li>
													</ul>
												</div>
											</div>
										</div>
										<div class="d-flex justify-content-between mt-2">
											<div class="d-flex">
												<p class="border-text1 me-2" th:text="${data.leader}"></p>
												<p class="border-text1 me-2"
													th:text="${#temporals.format(data.approvalDecisionAt, 'yyyy-MM-dd HH:mm')}">작성
													시간</p>
											</div>
											<div>
												<i class="bi bi-person me-3"
													th:text="${data.memberCount} + ' / ' + ${data.maxMembers}"></i>
											</div>
										</div>
									</div>
									<p th:text="${data.description}"></p>
								</div>
							</div>
							<div
								class="card overflow-hidden rounded-4 border-0 mb-3 mt-2 p-3 shadow-sm">
								<div class="container-sm">
									<div class="row align-items-start">
										<div class="col-md-10 mt-1 mb-1">
											<textarea id="commentInput" class="form-control"
												placeholder="내용을 입력하세요"
												th:attr="data-group=${data.id}, disabled=${data.recruitmentStatus != 'RECRUITING' ? 'disabled' : null}"
												rows="2" style="resize: none; width: 100%;"></textarea>
										</div>
										<div
											class="col-md-2 d-flex justify-content-end align-items-start">
											<!-- 등록 버튼 -->
											<button id="registerButton"
												class="btn btn-success w-100 button-gradient mt-1"
												th:attr="disabled=${data.recruitmentStatus != 'RECRUITING' ? 'disabled' : null}">등록</button>
										</div>
									</div>
								</div>
							</div>
							<div class="comments" id="commentsContainer">
								<!-- 댓글 영역 -->
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
	</main>
	<!-- Footer-->
	<footer class="bg-white py-4 mt-auto">
		<div class="container px-5">
			<div
				class="row align-items-center justify-content-between flex-column flex-sm-row">
				<div class="col-auto">
					<div class="small m-0">Copyright &copy; Your Website 2023</div>
				</div>
				<div class="col-auto">
					<a class="small" href="#!">Privacy</a> <span class="mx-1">&middot;</span>
					<a class="small" href="#!">Terms</a> <span class="mx-1">&middot;</span>
					<a class="small" href="#!">Contact</a>
				</div>
			</div>
		</div>
	</footer>
</body>
</html>
