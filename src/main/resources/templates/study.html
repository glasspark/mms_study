<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<meta name="description" content="" />
<meta name="author" content="" />
<title>MMS - 모두모여스터디</title>
<!-- Favicon-->
<link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
<!-- Custom Google font-->
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link
	href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@100;200;300;400;500;600;700;800;900&amp;display=swap"
	rel="stylesheet" />
<!-- Bootstrap icons-->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css"
	rel="stylesheet" />
<!-- Core theme CSS (includes Bootstrap)-->
<link href="/css/study.css" rel="stylesheet" />
<link href="/css/styles.css" rel="stylesheet" />
<!-- Bootstrap core JS-->
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- 제이쿼리 -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!-- Core theme JS-->
<script src="js/scripts.js"></script>
<script src="js/study.js"></script>
</head>
<body class="d-flex flex-column h-100 bg-light">
	<main class="flex-shrink-0">
		<!-- 네비게이션바 -->
		<nav th:replace="~{navbar :: navbarFragment}"></nav>
		<!-- Page Content-->
		<div class="container px-5 my-5">
			<div class="text-center mb-5">
				<h1 class="display-5 fw-bolder mb-0">
					<span class="text-gradient d-inline">함께 공부할 스터디를 찾아보세요</span>
				</h1>
			</div>
			<div class="row gx-5 justify-content-center">
				<div class="col-lg-11 col-xl-9 col-xxl-8">
					<!-- Experience Section-->
					<section>
						<!-- 			<div
							class="d-flex align-items-center justify-content-around mb-4 w-100">
							30% width for the title
							<div class="col-3">
								<h2 class="text-primary fw-bolder mb-0">검색하기</h2>
							</div>
							70% width for the input and button
							<div class="col-7">
								<div class="input-group">
									<input type="text" class="form-control"
										placeholder="스터디그룹 검색하기" aria-label="Search"
										aria-describedby="button-addon2">
									<button class="btn color-gradient" type="button"
										id="button-addon2">검색하기</button>
								</div>
							</div>
						</div> -->

						<div
							class=" d-flex flex-column align-items-center justify-content-center mb-1 w-100">
							<form method="get" th:action="@{/study}" class="w-100">
								<!-- 30% width for the title -->
								<div class="input-group mb-4">
									<div class="d-flex search-box">
										<div class="search-icon ms-4 me-4">
											<i class="bi bi-search fs-2 fs-md-2 fs-lg-1"></i>
										</div>
										<input type="text" class="search-input" placeholder="스터디그룹 검색"
											aria-label="Search" aria-describedby="button-addon2"
											id="groupSearch" name="searchText"
											th:value="${searchText != null ? searchText : ''}">
									</div>
									<div>
										<button class="btn color-gradient ms-4" style="height: 100%;"
											type="submit" id="button-addon2">검색하기</button>
									</div>
								</div>
								<!-- 70% width for the input and button -->
								<div class="input-group mb-4">
									<div class="d-flex search-box">
										<div class="search-icon ms-4 me-4">
											<i class="bi bi-hash fs-2 fs-md-2 fs-lg-1"></i>
										</div>
										<input type="text" class="search-input" placeholder="태그로 검색"
											aria-label="Search" aria-describedby="button-addon2"
											name="tag" id="tagSearch"
											th:value="${tag != null ? tag : ''}">
									</div>
									<div>
										<button class="btn reset-btn ms-4 " style="height: 100%;"
											type="reset" id="resetButton">
											<i class="bi bi-arrow-repeat"></i> 초기화
										</button>
									</div>
								</div>
							</form>
						</div>
						<div class="d-flex justify-content-between">
							<div class="align-self-end">
								<ul class="d-flex justify-content-start stydy-ul">
									<li class="e-order" data-order="recent"><a
										th:href="@{/study(type='all', searchText=${searchText}, tag=${tag})}"
										class="ac-button is-md is-text tab-button li-text-style"
										th:classappend="${type == 'all'} ? ' activeLi'"> <svg
												xmlns="http://www.w3.org/2000/svg" width="16" height="16"
												viewBox="0 0 16 16">
                        <path fill="#212529"
													d="M8 10c-1.105 0-2-.895-2-2s.895-2 2-2 2 .895 2 2-.895 2-2 2z"
													clip-rule="evenodd"></path>
                    </svg> 전체
									</a></li>
									<li class="e-order" data-order="recent"><a
										th:classappend="${type == 'RECRUITING'} ? ' activeLi'"
										th:href="@{/study(type='RECRUITING', searchText=${searchText}, tag=${tag})}"
										class="ac-button is-md is-text tab-button li-text-style">
											<svg xmlns="http://www.w3.org/2000/svg" width="16"
												height="16" viewBox="0 0 16 16">
                        <path fill="#212529"
													d="M8 10c-1.105 0-2-.895-2-2s.895-2 2-2 2 .895 2 2-.895 2-2 2z"
													clip-rule="evenodd"></path>
                    </svg> 모집중
									</a></li>
									<li class="e-order" data-order="recent"><a
										th:classappend="${type == 'RECRUITMENT_CLOSED'} ? ' activeLi'"
										th:href="@{/study(type='RECRUITMENT_CLOSED', searchText=${searchText}, tag=${tag})}"
										class="ac-button is-md is-text tab-button li-text-style">
											<svg xmlns="http://www.w3.org/2000/svg" width="16"
												height="16" viewBox="0 0 16 16">
                        <path fill="#212529"
													d="M8 10c-1.105 0-2-.895-2-2s.895-2 2-2 2 .895 2 2-.895 2-2 2z"
													clip-rule="evenodd"></path>
                    </svg> 모집완료
									</a></li>
								</ul>
							</div>
							<div>
								<button class="btn button-gradient mb-3 me-1"
									onclick="location.href='/create/group'">그룹생성</button>
							</div>
						</div>
						

						<div class="info-box border-0 border-bottom"
							th:each="group, iterStat : ${data}"
							th:onclick="'location.href=\'/study/' + ${group.id} + '\''"
							id="groupListArea">

							<div class="info-box-body p-3 d-flex flex-column">
								<div class="d-flex justify-content-start align-items-center">
									<span th:switch="${group.recruitmentStatus}"
										class="group-statu-type p-1"
										th:classappend="${group.recruitmentStatus == 'RECRUITING'} ? 'recruiting' : 
                      (${group.recruitmentStatus == 'RECRUITMENT_CLOSED'} ? 'recruitment-closed' : '')">
										<span th:case="'RECRUITING'">모집중</span> <span
										th:case="'RECRUITMENT_CLOSED'">모집완료</span> <!-- 기본 값 설정 --> <!-- <span
										th:case="*">상태 없음</span> -->
									</span>
									<h3 class="ps-2 mb-0 " th:text=${group.name}></h3>
								</div>
								<div>
									<!-- 내용 들어감  -->
									<p th:text=${group.description}></p>
								</div>
								<!-- 두 번째 행: 오른쪽 정렬 -->
								<div>
									<div class="tag-container">
										<p class="tag-lists">
											<span th:each="tag : ${group.tagList}"
												class="badge bg-light  tag-lists  border-text1 me-2"
												th:text="'#' + ${tag}"></span>
										</p>
									</div>
								</div>
								<div class="d-flex justify-content-between mt-1">
									<div class="d-flex">
										<p class="border-text1 me-2" th:text=${group.leader}></p>
										<p class="border-text1 me-2"
											th:if="${group.subLeader != null}"></p>
										<p class="border-text1 me-2"
											th:text="${#temporals.format(group.approvalDecisionAt, 'yyyy-MM-dd HH:mm')}">작성
											시간</p>
									</div>
									<div>
										<!-- 		<i class="bi bi-hand-thumbs-up me-3">100</i> <i
											class="bi bi-eye me-3">100</i>  -->
										<i class="bi bi-chat me-3" th:text="${group.commentLength}"></i> <i class="bi bi-person"
											th:text="${group.memberCount} + ' / ' + ${group.maxMembers}">
										</i>
									</div>
								</div>
							</div>
						</div>

					</section>

					<!-- Divider-->
					<div class="pb-4"></div>

					<!-- 페이징 처리 -->
					<div th:if="${totalPages > 1}">
						<ul class="pagination justify-content-center">

							<!-- 이전 페이지 링크 (5 페이지씩 이동) -->
							<li class="page-item"
								th:classappend="${startPage == 0} ? 'disabled'"><a
								class="page-link"
								th:href="@{/study(page=${previousPage}, type=${type}, searchText=${searchText}, tag=${tag})}">
									<span>이전</span>
							</a></li>

							<!-- 페이지 번호 링크 -->
							<li th:each="page : ${#numbers.sequence(startPage, endPage)}"
								th:classappend="${page == currentPage} ? 'active'"
								class="page-item"><a th:text="${page + 1}"
								class="page-link"
								th:href="@{/study(page=${page}, type=${type}, searchText=${searchText}, tag=${tag})}"></a></li>

							<!-- 다음 페이지 링크 (5 페이지씩 이동) -->
							<li class="page-item"
								th:classappend="${endPage == totalPages - 1} ? 'disabled'">
								<a class="page-link"
								th:href="@{/study(page=${nextPage}, type=${type}, searchText=${searchText}, tag=${tag})}">
									<span>다음</span>
							</a>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</main>
	<!-- Footer-->
	<footer class="bg-white py-4 mt-auto">
		<div class="container px-5">
			<div
				class="row align-items-center justify-content-between flex-column flex-sm-row">
				<div class="col-auto">
					<div class="small m-0">Copyright &copy; Your Website 2023</div>
				</div>
				<div class="col-auto">
					<a class="small" href="#!">Privacy</a> <span class="mx-1">&middot;</span>
					<a class="small" href="#!">Terms</a> <span class="mx-1">&middot;</span>
					<a class="small" href="#!">Contact</a>
				</div>
			</div>
		</div>
	</footer>

</body>
</html>
